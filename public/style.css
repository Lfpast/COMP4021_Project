/* 默认主题：Classic White */
:root,
[data-theme="classic_white"] {
	--bg: #f5f7fa;
	--card: #ffffff;
	--text: #2c3e50;
	--accent: #3498db;
	--border: #e1e8ed;
	--shadow: rgba(0, 0, 0, 0.08);
	background: #f5f7fa;
}

[data-theme="desert"] {
	--bg: #f4e4bc;
	--card: #e4d4b4;
	--accent: #cc8800;
	--text: #333;
	--border: #d4c4a4;
	background: #f4e4bc;
	color: #333;
}

/* Garden 花园主题（微软扫雷经典草地风格） */
[data-theme="garden"] {
	--bg: #8bc34a;
	--card: rgba(255, 255, 255, 0.92);
	--text: #2e7d32;
	--accent: #689f38;
	--border: #7cb342;
	--shadow: rgba(104, 159, 56, 0.4);

	background:
		radial-gradient(circle at 20% 80%, #a0d468 0%, transparent 50%),
		radial-gradient(circle at 80% 20%, #88c44a 0%, transparent 50%),
		linear-gradient(135deg, #9ccc65 0%, #7cb342 100%);
	background-attachment: fixed;
	color: #33691e;
}

/* ====================== 统一所有主题的按钮立体渐变效果 ====================== */

/* Classic 蓝色立体渐变 */
[data-theme="classic"] .big-btn,
[data-theme="classic"] #joinLobbyBtn,
[data-theme="classic"] #copyRoomBtn,
[data-theme="classic"] #startGameBtn {
	background: linear-gradient(to bottom, #66b3ff, #3498db);
	box-shadow:
		inset 0 1px 0 rgba(255, 255, 255, 0.4),
		0 4px 12px rgba(0, 0, 0, 0.25);
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}
[data-theme="classic"] .big-btn:hover,
[data-theme="classic"] #joinLobbyBtn:hover,
[data-theme="classic"] #copyRoomBtn:hover {
	background: linear-gradient(to bottom, #80bfff, #3498db);
	transform: translateY(-2px);
	box-shadow: 0 8px 20px rgba(52, 152, 219, 0.5);
}

/* Desert 橙色立体渐变 */
[data-theme="desert"] .big-btn,
[data-theme="desert"] #joinLobbyBtn,
[data-theme="desert"] #copyRoomBtn,
[data-theme="desert"] #startGameBtn {
	background: linear-gradient(to bottom, #ffb74d, #cc8800);
	box-shadow:
		inset 0 1px 0 rgba(255, 255, 255, 0.4),
		0 4px 12px rgba(0, 0, 0, 0.25);
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}
[data-theme="desert"] .big-btn:hover,
[data-theme="desert"] #joinLobbyBtn:hover,
[data-theme="desert"] #copyRoomBtn:hover {
	background: linear-gradient(to bottom, #ffca75, #e69500);
	transform: translateY(-2px);
	box-shadow: 0 8px 20px rgba(204, 136, 0, 0.5);
}

/* Garden 绿色立体渐变（原版微软风格） */
[data-theme="garden"] .big-btn,
[data-theme="garden"] #startGameBtn,
[data-theme="garden"] #joinLobbyBtn,
[data-theme="garden"] #copyRoomBtn {
	background: linear-gradient(to bottom, #9ccc65, #7cb342);
	color: white;
	font-weight: bold;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
	box-shadow:
		inset 0 1px 0 rgba(255, 255, 255, 0.4),
		0 4px 12px rgba(104, 159, 56, 0.3);
}
[data-theme="garden"] .big-btn:hover,
[data-theme="garden"] #startGameBtn:hover,
[data-theme="garden"] #joinLobbyBtn:hover,
[data-theme="garden"] #copyRoomBtn:hover {
	background: linear-gradient(to bottom, #aed581, #8bc34a);
	transform: translateY(-2px);
	box-shadow: 0 8px 20px rgba(139, 195, 74, 0.5);
}

body {
	background: var(--bg);
	color: var(--text);
	font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
	margin: 0;
	padding: 0;
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

.container {
	display: flex;
	justify-content: center; /* Center the content horizontally */
	align-items: center; /* Center vertically inside container */
	max-width: 1200px;
	margin: 80px auto 40px;
	padding: 0 30px;
	gap: 40px;
}

.left-panel,
.right-panel {
	flex: 1;
	background: var(--card);
	padding: 30px;
	border-radius: 16px;
	box-shadow: 0 4px 20px var(--shadow);
}

.big-btn {
	width: 100%;
	padding: 16px;
	font-size: 18px;
	border: none;
	color: white;
	border-radius: 12px;
	cursor: pointer;
	transition: all 0.3s ease;
	/* Default blue if no theme is set */
	background: linear-gradient(to bottom, #66b3ff, #3498db);
	box-shadow:
		inset 0 1px 0 rgba(255, 255, 255, 0.4),
		0 4px 12px rgba(0, 0, 0, 0.25);
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}

/* Unified style for game control buttons */
#backToLobbyBtn,
#restartOverBtn,
#startNewGameBtn {
	padding: 10px 20px;
	font-size: 16px;
	border: none;
	color: white;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.3s ease;
	background: linear-gradient(to bottom, #66b3ff, #3498db);
	box-shadow:
		inset 0 1px 0 rgba(255, 255, 255, 0.4),
		0 4px 12px rgba(0, 0, 0, 0.25);
}

#backToLobbyBtn:hover,
#restartOverBtn:hover,
#startNewGameBtn:hover {
	background: linear-gradient(to bottom, #80bfff, #3498db);
	transform: translateY(-2px);
	box-shadow: 0 6px 16px rgba(52, 152, 219, 0.5);
}

.btn-group {
	display: flex;
	gap: 12px;
	margin-top: 15px;
}

.btn-group button {
	flex: 1;
	padding: 12px;
	background: var(--accent);
	color: rgb(255, 255, 255);
	border: none;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.3s;
}

.btn-group button:hover {
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* Custom input invalid state */
.custom-invalid {
	border: 2px solid #e74c3c !important;
	box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.08);
}

.modal {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.6);
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 999;
}
.modal-content {
	background: #ffffff;
	padding: 40px;
	border-radius: 16px;
	text-align: center;
	width: 90%;
	max-width: 420px;
	box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
	color: #333;
}

input,
select {
	width: 100%;
	padding: 12px;
	margin: 10px 0;
	border-radius: 8px;
	border: 1px solid #ddd;
	background: #fff;
	color: #333;
	font-size: 16px;
	box-sizing: border-box;
}

.join-box {
	display: flex;
	margin-top: 15px;
	gap: 10px;
}
.join-box input {
	flex: 1;
}

table {
	width: 100%;
	border-collapse: collapse;
	margin-top: 10px;
}
th,
td {
	padding: 12px;
	text-align: center;
	border: 1px solid var(--border);
	background: var(--card);
}
th {
	background: var(--accent);
	color: white;
	font-weight: bold;
}

.header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 0 30px;
	background: rgba(255, 255, 255, 0.95);
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: 60px;
	z-index: 100;
	backdrop-filter: blur(12px);
	border-bottom: 1px solid #eee;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
	margin-bottom: 20px;
	position: relative;
}
.header h1 {
	margin: 0;
	color: var(--accent);
	font-size: 24px;
}

/* Gameplay Settings 样式 */
.gameplay-settings {
	margin-top: 16px;
	display: flex;
	flex-direction: column;
	gap: 18px;
}

.setting-item {
	display: flex;
	align-items: center;
	gap: 14px;
	font-size: 15px;
	user-select: none;
}

.setting-item input[type="checkbox"] {
	width: 20px;
	height: 20px;
	margin: 0;
	cursor: pointer;
	accent-color: var(--accent);
}

.volume-control {
	display: flex;
	align-items: center;
	gap: 14px;
}

#volumeSlider {
	flex: 1;
	height: 8px;
	border-radius: 4px;
	background: #ddd;
	outline: none;
	-webkit-appearance: none;
}

#volumeSlider::-webkit-slider-thumb {
	-webkit-appearance: none;
	width: 20px;
	height: 20px;
	border-radius: 50%;
	background: var(--accent);
	cursor: pointer;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

#createRoomNameInput {
	border: 1px solid var(--border);
	background: var(--card);
}

#roomInfo {
	background: rgba(0, 0, 0, 0.05) !important;
	border-radius: 12px;
}

#currentRoomName {
	font-size: 18px;
	font-weight: bold;
}

/* 让 Join Room 按钮在所有主题下都好看 */
#joinLobbyBtn {
	padding: 12px 24px !important;
	border-radius: 10px;
	font-weight: bold;
}

/* 让输入框在 Garden 主题下也好看 */
[data-theme="garden"] input,
[data-theme="garden"] select {
	background: rgba(255, 255, 255, 0.95);
	border: 2px solid #a5d6a7;
}

/* Game Page Specific Styles */
#gamePage {
	min-height: 100vh;
	background: var(--bg);
	overflow-y: auto; /* 允许滚动，防止大棋盘显示不全 */
}

/* Ensure lobby container is vertically centered below header */
#mainPage .container {
	min-height: calc(100vh - 120px);
	align-items: center;
}

.game-container {
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 20px;
	gap: 30px;
	margin-top: 20px;
	min-height: 85vh;
	box-sizing: border-box;
}

#boardCanvas {
	display: block;
	background: #bbbbbb;
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
	border-radius: 8px;

	/* 关键：控制大小为屏幕的一半左右，保持比例 */
	width: auto;
	height: auto;
	/* max-width: 75vw;
  max-height: 85vh;
  object-fit: contain; */
}

.game-info {
	/* 让右侧信息栏高度自适应，不要撑满 */
	height: fit-content;
	/* ...原有其他样式保持不变... */
	display: flex;
	flex-direction: column;
	gap: 15px;
	width: 30%;
	max-width: 300px;
	background: var(--card);
	padding: 15px;
	border-radius: 12px;
	box-shadow: var(--shadow);
}

#timerDisplay {
	font-size: 18px;
	font-weight: bold;
}

#cheatBtn {
	display: none;
}

#overModal .modal-content {
	text-align: center;
}

/* Ensure game-over modal buttons are equal width and evenly spaced */
.modal .btn-group {
	display: flex;
	flex-direction: column; /* stack vertically; change to row if you want side-by-side */
	gap: 12px;
	margin-top: 20px;
	align-items: stretch;
}
.modal .btn-group .big-btn {
	flex: none; /* don't let flex grow; use width to keep consistent */
	width: 100%;
	padding: 14px 18px;
	font-size: 18px;
	border-radius: 12px;
	box-sizing: border-box; /* ensure padding included in width so both sizes match precisely */
	display: inline-block; /* consistent rendering */
	line-height: 1.4; /* keep consistent line-height */
}

/* Explicitly make the two modal buttons identical by id */
#overBackToLobbyBtn,
#startNewGameBtn {
	padding: 14px 18px !important;
	font-size: 18px !important;
	border-radius: 12px !important;
	width: 100% !important;
	box-sizing: border-box !important;
	display: inline-block !important;
}

#overTitle {
	color: var(--accent);
	font-size: 32px;
}

#overMessage {
	font-size: 18px;
	margin: 10px 0;
}

#overStats table {
	margin: auto;
}

#rankingsTable table {
	margin: auto;
	width: 100%;
}

#restartOverBtn,
#backToLobbyBtn {
	padding: 12px 24px;
	margin-top: 20px;
}

#personalStats {
	background: rgba(255, 255, 255, 0.1);
	border-radius: 12px;
	padding: 16px;
	backdrop-filter: blur(10px);
	margin-top: 20px;
}

.stat-row {
	display: flex;
	justify-content: space-between;
	margin: 12px 0;
	font-size: 15px;
}

.stat-label {
	color: #aaa;
}

.stat-value {
	color: #000000;
	font-weight: bold;
	min-width: 80px;
	text-align: right;
}

.container {
	display: flex;
	justify-content: space-between;
	gap: 30px;
	padding: 20px;
	max-width: 1400px;
	margin: 0 auto;
	padding-top: 20px;
}

.left-panel,
.right-panel {
	background: rgba(255, 255, 255, 0.1);
	padding: 20px;
	border-radius: 16px;
	backdrop-filter: blur(10px);
	/* flex: 1; */
	width: 50%;
	max-width: 50%;
	box-sizing: border-box;
}

/* .right-panel {
  min-width: 300px;
  max-width: 360px;
} */

[data-theme="desert"] {
	--bg: #f4e4bc;
	--card: #e4d4b4;
	--accent: #cc8800;
	--text: #333;
	--border: #d4c4a4;
	background: #f4e4bc;
}

[data-theme="garden"] {
	--bg: #8bc34a;
	--card: rgba(255, 255, 255, 0.92);
	--text: #2e7d32;
	--accent: #689f38;
	background: linear-gradient(135deg, #9ccc65 0%, #7cb342 100%);
}

#volumeValue {
	margin-left: 10px;
	min-width: 40px;
	font-weight: bold;
}

/* 强制所有主题下的按钮都重新定义背景 */
[data-theme="garden"] .big-btn,
[data-theme="desert"] .big-btn,
[data-theme="classic"] .big-btn {
	background: var(--accent) !important; /* 强制使用当前主题的 accent */
}

.players-list li.me {
	font-weight: 700;
	color: var(--accent);
}
.players-list li.host {
	text-decoration: underline;
	font-style: italic;
}

/* Login Split */
.login-split-container {
	display: flex;
	flex-direction: row;
	gap: 30px;
	max-width: 700px !important; /* Wider modal */
	width: 90%;
	padding-bottom: 50px !important; /* Space for msg */
	position: relative;
	align-items: stretch;
}

.login-section {
	flex: 1;
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.login-section h2 {
	margin: 0 0 10px 0;
	color: var(--accent);
}

.login-divider {
	width: 1px;
	background: #eee;
}

/* Lobby List */
.lobby-list {
	height: 200px; /* Fixed height for scrolling */
	overflow-y: auto;
	background: rgba(255, 255, 255, 0.5);
	border: 1px solid var(--border);
	border-radius: 8px;
	margin-bottom: 10px;
}

.lobby-item {
	padding: 12px;
	border-bottom: 1px solid var(--border);
	cursor: pointer;
	display: flex;
	justify-content: space-between;
	align-items: center;
	transition: background 0.2s;
}

.lobby-item:hover {
	background: rgba(255, 255, 255, 0.8);
}

.lobby-item:last-child {
	border-bottom: none;
}

.lobby-item .info {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.lobby-item .name {
	font-weight: bold;
	color: var(--text);
	font-size: 15px;
}

.lobby-item .details {
	font-size: 12px;
	color: #666;
}

.lobby-item .status {
	font-size: 12px;
	padding: 4px 8px;
	border-radius: 12px;
	font-weight: bold;
}

.lobby-item .status.playing {
	background: #ffebee;
	color: #c62828;
}

.lobby-item .status.waiting {
	background: #e8f5e9;
	color: #2e7d32;
}

/* Scrollbar styling */
.lobby-list::-webkit-scrollbar {
	width: 8px;
}
.lobby-list::-webkit-scrollbar-track {
	background: transparent;
}
.lobby-list::-webkit-scrollbar-thumb {
	background: #ccc;
	border-radius: 4px;
}
.lobby-list::-webkit-scrollbar-thumb:hover {
	background: #bbb;
}
.header .big-btn {
	width: auto !important; /* prevent full width; keep compact in header */
	padding: 8px 14px !important;
	font-size: 15px !important;
	border-radius: 10px !important;
	height: 36px !important;
	align-self: center;
}

.header .big-btn:hover {
	transform: translateY(-2px);
	box-shadow: 0 6px 16px rgba(52, 152, 219, 0.5);
}

/* Side menu styles */
.side-menu-toggle {
	position: fixed;
	right: 16px;
	/* lower the button so it doesn't overlap the header/logout area */
	top: 80px;
	z-index: 2000;
	background: var(--accent);
	color: white;
	border: none;
	padding: 10px 12px;
	border-radius: 8px;
	cursor: pointer;
	box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
}
/* Hide the side menu toggle during login modal (inline style 'display:flex') as an extra fallback */
#loginModal[style*="display: flex"] ~ #sideMenuToggle {
	display: none !important;
}
.side-menu {
	position: fixed;
	right: -360px;
	top: 0;
	height: 100vh;
	width: 360px;
	background: var(--card);
	box-shadow: -8px 0 24px rgba(0, 0, 0, 0.2);
	transition: right 0.28s ease;
	z-index: 1999;
	display: flex;
	flex-direction: column;
}
.side-menu.open {
	right: 0;
}
.side-menu-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px;
	border-bottom: 1px solid var(--border);
}
.side-menu-body {
	padding: 16px;
	overflow-y: auto;
}
.side-section {
	margin-bottom: 18px;
}
.side-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	margin: 8px 0;
}
.side-row span {
	flex: 1;
}
.side-row input {
	flex: 0;
}
.side-section h4 {
	margin: 0 0 8px 0;
	color: var(--accent);
}
.icon-btn {
	background: none;
	border: none;
	font-size: 18px;
	cursor: pointer;
}
.intro-text {
	font-size: 13px;
	color: #444;
}
.side-menu input[type="range"] {
	width: 100%;
}
.side-menu input[type="checkbox"] {
	transform: scale(1.1);
	margin-right: 6px;
}
.custom-invalid {
	box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.1) inset;
	border: 1px solid rgba(255, 0, 0, 0.3);
}
/* Simple in-game toast for notifications */
.game-toast {
	position: fixed;
	right: 24px;
	top: 96px;
	z-index: 99999;
	background: rgba(0, 0, 0, 0.8);
	color: #fff;
	padding: 10px 14px;
	border-radius: 8px;
	font-size: 14px;
	box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
	opacity: 0;
	transform: translateY(-6px);
	transition:
		opacity 0.2s,
		transform 0.2s;
}
.center-toast {
	position: fixed;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: 99999;
	background: rgba(255, 255, 255, 0.98);
	color: #333;
	padding: 16px 18px;
	border-radius: 10px;
	font-weight: 600;
	box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
	opacity: 0;
	transition:
		opacity 0.18s ease,
		transform 0.18s ease;
}
.center-toast.show {
	opacity: 1;
	transform: translate(-50%, -50%) scale(1);
}
.game-toast.show {
	opacity: 1;
	transform: translateY(0);
}
